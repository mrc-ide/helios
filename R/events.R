#' Generate a list of the model events
#'
#' @param parameters A list of the model parameters as generated by `get_parameters`
#'
#' @export
create_events <- function(parameters) {

  # Open a list to store the model events and populate using the event generator functions:
  events <- list(

    # Event moving exposed individuals to the infectious state
    EI_event <- TargetedEvent$new(population_size = parameters$human_population),

    # Event moving exposed individuals to the infectious state
    IR_event <- TargetedEvent$new(population_size = parameters$human_population)

  )

  # Return the list of model events:
  events
}

#' Attach listener functions to event-based processes
#' @description defines processes for events that can be scheduled in the future
#' @param variables - A list of model variables as generated by `create_variables`
#' @param events - A list of model events as generated by `create_events`
#'
#' @export
add_event_listeners <- function(variables, events) {

  # Add listener for function governing transition of individuals from E to I:
  EI_event$add_listener(
    function(t, target) {
      variables$disease_state$queue_update("I", target)
    }
  )

  # Add listener for function governing transition of individuals from I to R:
  IR_event$add_listener(
    function(t, target) {
      variables$disease_state$queue_update("R", target)
    }
  )

}
